#  ==========================
# STRATEGY LIBRARY (v4.8.3+ EXPANSION DRAFT)
#  ==========================
# Notes:
# - Your existing 4 strategies remain unchanged at the top.
# - New strategies below are DISABLED by default (enabled = False).
# - These keys will be wired into the engine in the next code patch.
#  ==========================


[STRATEGY_THE_GENERAL]
rsi_buy = 35
bollinger_std = 2.0
ema_period = 200
adx_min = 20
require_confirmation = True
trailing_stop_pct = 0.02
stop_loss = 0.02
min_rvol = 1.2

[STRATEGY_SNIPER]
rsi_buy = 25
bollinger_std = 2.5
ema_period = 200
adx_min = 25
require_confirmation = True
trailing_stop_pct = 0.015
stop_loss = 0.015
min_rvol = 2.0

[STRATEGY_MOMENTUM]
rsi_buy = 45
bollinger_std = 1.5
ema_period = 50
adx_min = 30
require_confirmation = False
trailing_stop_pct = 0.04
stop_loss = 0.05
min_rvol = 1.0

[STRATEGY_BREAKOUT]
rsi_buy = 60
bollinger_std = 2.0
ema_period = 50
adx_min = 25
require_confirmation = False
trailing_stop_pct = 0.03
stop_loss = 0.03
min_rvol = 2.5


#  ==========================
# NEW STRATEGIES (DISABLED BY DEFAULT)
#  ==========================


#  ==========================
# TREND / MOMENTUM FAMILY
#  ==========================

[STRATEGY_TREND_FOLLOW_TSM]
# Master enable for this strategy module.
enabled = False
# High-level grouping label for allocators / reporting.
family = TREND
# Allowed regimes (future: regime engine will gate entries).
regime_allowed = TREND_UP,TREND_DOWN
# Timeframe used for primary signal (future: supports 1m/5m/15m features).
signal_timeframe = 1Min
# Lookback bars for time-series momentum return (e.g., 240 bars = 4h on 1m).
tsm_lookback_bars = 240
# Minimum absolute momentum threshold to consider a trend valid (as % return).
tsm_min_abs_return = 0.003
# Trend filter fast EMA length (higher timeframe filter can be added later).
ema_fast = 50
# Trend filter slow EMA length.
ema_slow = 200
# Minimum ADX for trend validity.
adx_min = 20
# ATR period for volatility-scaled stops.
atr_period = 14
# Stop-loss = ATR * this multiplier.
stop_atr_mult = 2.0
# Take-profit = ATR * this multiplier (optional; set 0 to disable).
take_atr_mult = 0.0
# Use trailing stop based on ATR (True/False).
use_atr_trailing = True
# Trailing stop distance = ATR * this multiplier.
trail_atr_mult = 2.5
# Minimum relative volume filter (1.0 disables).
min_rvol = 1.0


[STRATEGY_MOMENTUM_CROSS_SECTIONAL]
# Master enable for this strategy module.
enabled = False
# Group label.
family = MOMENTUM
# Allowed regimes.
regime_allowed = TREND_UP,TREND_DOWN
# Rank on lookback return and take top K candidates.
rank_lookback_bars = 120
# Number of symbols to select from the watchlist (top-K).
top_k = 3
# Minimum return threshold for a symbol to be eligible (% return).
min_return = 0.002
# Optional trend confirmation.
ema_period = 200
# Optional ADX gate.
adx_min = 18
# Optional RVOL gate.
min_rvol = 1.0
# Stop-loss percent (fallback stop if ATR stops disabled).
stop_loss = 0.02
# Trailing stop percent.
trailing_stop_pct = 0.02


#  ==========================
# BREAKOUT FAMILY
#  ==========================

[STRATEGY_DONCHIAN_BREAKOUT]
# Master enable for this strategy module.
enabled = False
# Group label.
family = BREAKOUT
# Allowed regimes.
regime_allowed = TREND_UP,TREND_DOWN
# Donchian channel lookback (bars). 240 = 4h on 1m.
donchian_period_bars = 240
# Require breakout buffer as a fraction of ATR (reduces false breaks).
breakout_buffer_atr = 0.10
# ATR period used for breakout buffer and stops.
atr_period = 14
# Minimum ADX to avoid chop breakouts.
adx_min = 22
# RVOL filter for breakout validity.
min_rvol = 1.2
# Stop-loss = ATR * multiplier.
stop_atr_mult = 2.0
# Optional take-profit = ATR * multiplier (0 disables).
take_atr_mult = 0.0
# Enable ATR trailing stop.
use_atr_trailing = True
# Trailing distance = ATR * multiplier.
trail_atr_mult = 3.0
# Maximum holding time before timeout exit.
max_hold_bars = 600


[STRATEGY_VOLATILITY_BREAKOUT_ATR]
# Master enable for this strategy module.
enabled = False
# Group label.
family = BREAKOUT
# Allowed regimes.
regime_allowed = TREND_UP,TREND_DOWN,HIGH_VOL
# ATR period.
atr_period = 14
# Breakout trigger if price moves >= ATR * multiplier from a reference (future: prior close/VWAP).
breakout_atr_mult = 1.0
# Minimum RVOL for breakout entries.
min_rvol = 1.5
# Minimum ADX for trend-following breakouts (lower if you want earlier entries).
adx_min = 18
# Stop-loss = ATR * multiplier.
stop_atr_mult = 1.8
# Optional take-profit = ATR * multiplier (0 disables).
take_atr_mult = 0.0
# Enable ATR trailing stop.
use_atr_trailing = True
# Trailing distance = ATR * multiplier.
trail_atr_mult = 2.8
# Cooldown bars after a stop-out (prevents churn).
cooldown_bars = 60


#  ==========================
# MEAN REVERSION FAMILY
#  ==========================

[STRATEGY_ZSCORE_BOLLINGER_REVERSION]
# Master enable for this strategy module.
enabled = False
# Group label.
family = MEAN_REVERSION
# Allowed regimes (mean reversion typically best in CHOP).
regime_allowed = CHOP
# Rolling window for mean/std computation (bars).
zscore_period_bars = 120
# Entry threshold: enter when abs(z) >= this value.
zscore_entry = 2.0
# Exit threshold: exit when abs(z) <= this value.
zscore_exit = 0.3
# Optional trend filter EMA (0 disables).
ema_filter_period = 200
# If True, only take longs when price is above EMA filter (safer).
require_above_ema = False
# ADX max threshold to avoid mean reversion during strong trends.
adx_max = 18
# Stop-loss percent.
stop_loss = 0.015
# Take-profit percent (0 disables; use zscore_exit only).
take_profit = 0.0
# Maximum holding duration in bars.
max_hold_bars = 240
# Minimum RVOL (set 1.0 to disable).
min_rvol = 1.0


[STRATEGY_RSI2_REVERSAL]
# Master enable for this strategy module.
enabled = False
# Group label.
family = MEAN_REVERSION
# Allowed regimes.
regime_allowed = CHOP
# RSI period (classic short-term reversal uses 2).
rsi_period = 2
# Enter long when RSI <= this.
rsi_entry = 10
# Exit when RSI >= this.
rsi_exit = 50
# ADX max to avoid trending knives.
adx_max = 16
# Optional volatility filter: skip entries if ATR% exceeds this threshold (0 disables).
max_atr_pct = 0.0
# Stop-loss percent.
stop_loss = 0.012
# Trailing stop percent (0 disables).
trailing_stop_pct = 0.0
# Maximum holding duration in bars.
max_hold_bars = 120
# Minimum RVOL (set 1.0 to disable).
min_rvol = 1.0


[STRATEGY_VWAP_REVERSION]
# Master enable for this strategy module.
enabled = False
# Group label.
family = MEAN_REVERSION
# Allowed regimes.
regime_allowed = CHOP
# Entry when price deviates from VWAP by >= this percent.
vwap_dev_entry_pct = 0.25
# Exit when deviation shrinks below this percent.
vwap_dev_exit_pct = 0.05
# Confirmation window (bars) that deviation is sustained (reduces noise).
confirm_bars = 3
# Max holding duration in bars.
max_hold_bars = 180
# Stop-loss percent.
stop_loss = 0.015
# Minimum RVOL for execution quality.
min_rvol = 1.2


#  ==========================
# RELATIVE VALUE / MARKET NEUTRAL (TEMPLATES)
#  ==========================
# These are framework-ready templates; we will wire them after regime/allocator is in place.

[STRATEGY_PAIRS_REVERSION_TEMPLATE]
# Master enable for pairs reversion framework.
enabled = False
# Group label.
family = RELATIVE_VALUE
# Allowed regimes (often CHOP works best).
regime_allowed = CHOP
# Pair list syntax (SYMA|SYMB;SYMC|SYMD;...)
pairs = 
# Spread calculation method (LOG_RATIO or PRICE_RATIO).
spread_method = LOG_RATIO
# Z-score lookback for spread.
spread_zscore_period_bars = 240
# Entry threshold for spread z-score.
spread_entry_z = 2.0
# Exit threshold for spread z-score.
spread_exit_z = 0.5
# Stop if spread z-score exceeds this (tail risk cutoff).
spread_stop_z = 3.5
# Max holding duration in bars.
max_hold_bars = 600
# Max simultaneous pairs positions.
max_pairs_positions = 1


#  ==========================
# RISK OVERLAYS (ALWAYS-ON LAYERS)
#  ==========================

[STRATEGY_VOL_TARGET_OVERLAY]
# Master enable for volatility targeting overlay.
enabled = False
# Group label.
family = RISK_OVERLAY
# Allowed regimes (overlay applies everywhere).
regime_allowed = TREND_UP,TREND_DOWN,CHOP,HIGH_VOL
# Target annualized volatility (0 disables; we can use ATR proxy initially).
target_annual_vol = 0.20
# Lookback for realized volatility estimate (bars).
vol_lookback_bars = 390
# Minimum scale allowed (never size below this fraction).
min_position_scale = 0.25
# Maximum scale allowed (never size above this fraction).
max_position_scale = 1.25
# If True, use ATR% as a proxy if realized-vol calc not available.
use_atr_proxy = True
# ATR period for proxy.
atr_period = 14


#  ==========================
# EVENT / NEWS FILTERS (GUARDRAILS)
#  ==========================

[STRATEGY_NEWS_SHOCK_FILTER]
# Master enable for shock filter (guardrail, not a strategy).
enabled = False
# Group label.
family = EVENT_FILTER
# Allowed regimes (filter applies everywhere).
regime_allowed = TREND_UP,TREND_DOWN,CHOP,HIGH_VOL
# If sentiment <= this threshold, block new entries for block_minutes.
block_if_sentiment_below = -0.30
# Block duration in minutes after a negative shock is detected.
block_minutes = 30
# If True, also tighten risk overlay when shock detected (future).
tighten_risk_on_shock = False
# If enabled, tighten scaling to this max fraction during shock.
shock_max_position_scale = 0.50
